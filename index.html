<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>

  <title>trendmicro/tme @ GitHub</title>

  <style type="text/css">
    body {
      margin-top: 1.0em;
      background-color: #f50000;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #ffffff;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
    h1 { font-size: 3.8em; color: #0affff; margin-bottom: 3px; }
    h1 .small { font-size: 0.4em; }
    h1 a { text-decoration: none }
    h2 { font-size: 1.5em; color: #0affff; }
    h3 { text-align: center; color: #0affff; }
    a { color: #0affff; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; font-style: italic;}
    .download { float: right; }
    pre { background: #000; color: #fff; padding: 15px;}
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }
  </style>
</head>

<body>
  <a href="https://github.com/trendmicro/tme"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>

  <div id="container">

    <div class="download">
      <a href="https://github.com/trendmicro/tme/zipball/master">
        <img border="0" width="90" src="https://github.com/images/modules/download/zip.png"></a>
      <a href="https://github.com/trendmicro/tme/tarball/master">
        <img border="0" width="90" src="https://github.com/images/modules/download/tar.png"></a>
    </div>

    <h1><a href="https://github.com/trendmicro/tme">tme</a>
      <span class="small">by <a href="https://github.com/trendmicro">trendmicro</a></span></h1>

    <div class="description">
      Trend Message Exchange (TME) aims to provide a distributed messaging infrastructure with scalability, stability, and operability.
    </div>

    
      <p>Trend Message Exchange is an event-driven messaging infrastructure for big data processing. The TME infrastructure is a network of servers (nodes) which offering message queuing and routing service. TME is evolving to better serve its clients by providing SLA, workflow management and high throughput.

[ to be expanded ]</p>
    

    
      <h2>Dependencies</h2>
      <p>JDK > 1.6.0_21
Monit
Boost
RRDTool
Graphviz
</p>
    

    
      <h2>Install</h2>
      <p>### CentOS ###

#### Broker ####
1. sudo yum install tme-broker
2. /opt/trend/tme/bin/create_zookeeper_nodes.sh [zookeeper quorum] [tme root node prefix path] (this only has to run once per cluster)
3. Edit /opt/trend/tme/conf/broker/config.properties (zookeeper quorum setting and tme root node path should be identical to the previous step)
4. sudo /opt/trend/tme/bin/install_tme-broker.sh 

#### MIST (clients) ####
1. sudo yum install tme-mist
2. Edit /opt/trend/tme/conf/mist/mistd.properties , also, the zookeeper settings should be identical
3. sudo /opt/trend/tme/bin/install_tme-mistd.sh 

Now you have the minimum TME cluster setup completed. Execute sid=`mist-session` ; echo "hello TME" | mist-encode --wrap test --line | mist-sink $sid --attach ; mist-session --destroy $sid

followed by

sid=`mist-session` ; mist-source $sid --mount test ; mist-source $sid --attach | mist-decode --line ; mist-session --destroy $sid

You should see "hello TME" printed on your screen. Press ctrl+c to terminate the program.

#### Portal ####
1. sudo yum install tme-portal-collector
2. Edit /opt/trend/tme/conf/portal-collector/portal-collector.properties
3. sudo /opt/trend/tme/bin/install_tme-portal-collector.sh
4. sudo yum install tme-portal-web
5. Edit /opt/trend/tme/conf/portal-web/portal-web-conf.sh
6. sudo /opt/trend/tme/bin/install_tme-portal-web.sh 

Open your browser and connect to http://[portal host]:[portal port] , and you should see the portal page

#### Graph Editor ####
1. sudo yum install tme-graph-editor
2. Edit /opt/trend/tme/conf/graph-editor/graph-editor.properties
3. sudo /opt/trend/tme/bin/install_tme-graph-editor.sh 

Open your browser and connect to http://[editor host]:[editor port]/webapp/graph-editor/graph , and you should see the graph editor page

#### Monit ####
Make sure monit daemons are started on all machines

#### Security ####

By default, the security of tme-console is disabled. To enable security, you have to login to one quorum of ZooKeeper use zkCli.sh to start ZooKeeper console and enter the following:

create /tme2/global/acl "" ip:127.0.0.1:cdwra,world:anyone:r
 create /tme2/global/acl/console_admins foo,bar ip:127.0.0.1:cdwra,world:anyone:r

In this example, the admins are foo and bar. They are seperated by comma.

After the node is created, you will be prompted to input username and password when you launch tme-console.

Because the node is created with the ACL above, it can only be modified from one of the ZooKeeper quorums. When you have to modify the content of admins, you have to use the ZooKeeper client and execute

set /tme2/global/acl/console_admins alice,bob
</p>
    

    
      <h2>License</h2>
      <p>Apache License, Version 2.0

   Copyright 2012 Trend Micro

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.</p>
    

    
      <h2>Authors</h2>
      <p>Scott Wang (scott_wang@hotmail.com)<br/>      </p>
    

    
      <h2>Contact</h2>
      <p>Trend Micro (andrew_purtell@trendmicro.com)<br/>      </p>
    

    <h2>Download</h2>
    <p>
      You can download this project in either
      <a href="https://github.com/trendmicro/tme/zipball/master">zip</a> or
      <a href="https://github.com/trendmicro/tme/tarball/master">tar formats.
    </p>
    <p>You can also clone the project with <a href="http://git-scm.com">Git</a>
      by running:
      <pre>$ git clone git://github.com/trendmicro/tme</pre>
    </p>

    <div class="footer">
      get the source code on GitHub : <a href="https://github.com/trendmicro/tme">trendmicro/tme</a>
    </div>

  </div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-29156013-1");
pageTracker._trackPageview();
} catch(err) {}</script>"
</body>
</html>
